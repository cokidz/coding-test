<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>완전 부드러운 시계 놀이</title>
<style>
  body {
    font-family: "맑은 고딕", sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    margin: 0;
    background: linear-gradient(to bottom, #87CEEB, #E0F7FA);
  }
  h1 { font-size: 2.6em; margin-bottom: 10px; color: #2c3e50; }
  #timeText {
    font-size: 3.3em;
    font-weight: bold;
    margin: 25px 0;
    color: #e74c3c;
  }
  .clock {
    position: relative;
    width: 420px;
    height: 420px;
    border: 24px solid #3498db;
    border-radius: 50%;
    background: white;
    box-shadow: 0 20px 60px rgba(0,0,0,0.25);
  }
  .center { position: absolute; top: 50%; left: 50%; width: 36px; height: 36px; background: #2c3e50; border-radius: 50%; transform: translate(-50%,-50%); z-index: 10; }
  .hand { position: absolute; bottom: 50%; left: 50%; transform-origin: bottom center; }
  .hour   { width: 16px; height: 140px; background: #2c3e50; border-radius: 10px; margin-left: -8px; }
  .minute { width: 10px; height: 190px; background: #e74c3c; border-radius: 6px; margin-left: -5px; cursor: grab; }
  .minute:active { cursor: grabbing; }
  .number {
    position: absolute;
    top: 50%; left: 50%;
    width: 60px; height: 60px;
    margin: -30px 0 0 -30px;
    font-size: 42px; font-weight: bold; color: #2c3e50;
    text-align: center; line-height: 60px;
  }
</style>
</head>
<body>

<h1>분침을 쭉쭉 돌려봐!</h1>
<div id="timeText">오전 12시 00분</div>

<div class="clock">
  <div class="center"></div>
  <div id="hourHand" class="hand hour"></div>
  <div id="minuteHand" class="hand minute"></div>

  <div class="number" style="transform: translateY(-180px)">12</div>
  <div class="number" style="transform: rotate(30deg)  translateY(-180px) rotate(-30deg)">1</div>
  <div class="number" style="transform: rotate(60deg)  translateY(-180px) rotate(-60deg)">2</div>
  <div class="number" style="transform: rotate(90deg)  translateY(-180px) rotate(-90deg)">3</div>
  <div class="number" style="transform: rotate(120deg) translateY(-180px) rotate(-120deg)">4</div>
  <div class="number" style="transform: rotate(150deg) translateY(-180px) rotate(-150deg)">5</div>
  <div class="number" style="transform: rotate(180deg) translateY(-180px) rotate(-180deg)">6</div>
  <div class="number" style="transform: rotate(210deg) translateY(-180px) rotate(-210deg)">7</div>
  <div class="number" style="transform: rotate(240deg) translateY(-180px) rotate(-240deg)">8</div>
  <div class="number" style="transform: rotate(270deg) translateY(-180px) rotate(-270deg)">9</div>
  <div class="number" style="transform: rotate(300deg) translateY(-180px) rotate(-300deg)">10</div>
  <div class="number" style="transform: rotate(330deg) translateY(-180px) rotate(-330deg)">11</div>
</div>

<script>
// 핵심: totalMinutes만 정확히 누적시키면 시침·분침·텍스트 모두 완벽해진다!
let totalMinutes = 0;

const minuteHand = document.getElementById('minuteHand');
const hourHand   = document.getElementById('hourHand');
const timeText   = document.getElementById('timeText');

function updateClock() {
  const mins  = totalMinutes % 60;
  const hours = Math.floor(totalMinutes / 60);

  // 분침: 6도 × 분
  minuteHand.style.transform = `rotate(${mins * 6}deg)`;

  // 시침: 0.5도 × 전체 분 (30도 × 시 + 0.5도 × 분)
  hourHand.style.transform   = `rotate(${totalMinutes * 0.5}deg)`;

  // 텍스트
  let h12 = hours % 12;
  if (h12 === 0) h12 = 12;
  const ampm = hours % 24 < 12 ? "오전" : "오후";
  timeText.textContent = `${ampm} ${h12}시 ${String(mins).padStart(2,'0')}분`;
}

// 마우스/터치로 분침 드래그 → totalMinutes만 바꿔주면 끝!
let isDragging = false;

function handleMove(e) {
  if (!isDragging) return;
  e.preventDefault();

  const clock = document.querySelector('.clock');
  const rect = clock.getBoundingClientRect();
  const cx = rect.left + rect.width / 2;
  const cy = rect.top + rect.height / 2;
  const x = (e.touches ? e.touches[0].clientX : e.clientX) - cx;
  const y = (e.touches ? e.touches[0].clientY : e.clientY) - cy;

  let angle = Math.atan2(y, x) * 180 / Math.PI + 90;
  if (angle < 0) angle += 360;

  // 1분 단위 스냅 (부드럽지만 딸깍 느낌 있음)
  const newMinuteInCircle = Math.round(angle / 6) * 6 / 6; // 0~59

  // 핵심! 이전 위치와 비교해서 차이만큼만 더해줌 → 점프 절대 없음
  const prevMinuteInCircle = totalMinutes % 60;
  let diff = newMinuteInCircle - prevMinuteInCircle;

  // 마우스가 시계 반대 방향으로 크게 넘어가면 +60 처리 (연속 회전 보정)
  if (diff < -30) diff += 60;
  if (diff >  30) diff -= 60;

  totalMinutes += diff;
  updateClock();
}

// 이벤트
minuteHand.addEventListener('mousedown', () => isDragging = true);
minuteHand.addEventListener('touchstart', e => { e.preventDefault(); isDragging = true; }, {passive:false});

document.addEventListener('mousemove', handleMove);
document.addEventListener('touchmove', handleMove, {passive:false});

document.addEventListener('mouseup',   () => isDragging = false);
document.addEventListener('touchend',  () => isDragging = false);

// 초기화
updateClock();
</script>

</body>
</html>
